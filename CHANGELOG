FreshTomato-MIPS Changelog
===========================



2019.1          2019.02.27
--------------------------

- kernel RT-AC: drivers: net: usb: cdc-ether.c: clean packet filter upon probe
- php: update to 7.2.15
- getdns: update to 1.5.1 (stubby 0.2.5)
- tor: updated to 0.3.5.8
- dnsmasq: update to 2.80-28cfe36 snapshot (add back ability to compile without IPv6 support to minimize size of dnsmasq (as a patch), cosmetics in other patches, little cleanup in router/Makefile)
- adminer: update from 4.7.0 to 4.7.1 2019-01-24
- libcurl: updated CA certificate bundle as of 2019-01-23
- libcurl: update to 7.64.0
- stubby: add Google DNSoTLS (ipv4/ipv6) to stubby.yml
- nettle: update to 3.4.1
- SQLite: update to 3.27.1
- miniupnpd: update to 2.1.20190210
- OpenVPN: update to 2.4.7
- switch4g: add support for rndis protocol
- switch4g: fix path for DIAG device in qmi_wwan mode
- stubby: change round_robin_upstreams to 1
- tinc: revert: Use git describe to populate autoconf's VERSION (it is needed to have proper "tinc --version" string, it must be remembered that with every tinc update, change the version number in the patch)
- tinc: synchronize source with ARM branch. For unknown reasons, MIPS version was quite different from the ARM...
- E4200v1: change LED pin table - this router has only 2 LEDs at the cisco LOGO
- vpnrouting: fix cleaning of routing after stopping the OpenVPN client with "Redirect through VPN" checked - not working from the very beginning (commit that adds this function, also responsible for the error: https://bitbucket.org/pedro311/freshtomato-mips/commits/4c75d36f6fb2c1da1de8d7db33e2a91714d045e8)
- switch4g: fix path for DIAG device in qmi_wwan mode
- DDNS: HE.net IPv6 Tunnel Broker uses now Dyn DNS Update API http://dyn.com/support/developers/api/
- DDNS: FreeDNS: add possibility to update IP with custom value as on other services, add https
- DDNS: opendns requires now HTTP 1.1 in request header
- GUI: OpenVPN ServerX & ClientX - restrict option/setting "Poll Interval" to 0-30 minutes (values > 30 are not usefull)
- GUI: OpenVPN: increase max length of client common name to 255 chararacters
- GUI: new termlib based tools-shell.asp as an option for o (Mega-VPN) and z (AIO) targets
- GUI optimization tools: optimize also javascript in .asp and .jsx files with filter (I know it will break W3C compatibility in some places, but we really need that to decrease image size...)
- GUI: add option for OpenVPN server to force IPv4 or IPv6 for connection
- GUI: add option for OpenVPN client to choose IPv4 or IPv6 only connection
- GUI: fix generate vpn client config
- GUI: QOS: hide View Details when QOS is disabled
- GUI: Wireless Filter: add a warning about the number of MAC addresses supported + cosmetics
- GUI: fix IPv6 mask matches
- router: Makefile: build nginx with http v2 module
- router: Makefile: don't ln /usr/share to /tmp when samba3 is installed
- router: Makefile: pptp-client: remove (forgotten) obsolete sh ip scripts
- router: Makefile: fix tor build failures
- router: Makefile: some changes with clean up
- router: httpd: tomato.c: additional commit for #c6db081 and #c7d5c2c (increase length of variables for vpn protocol to 11 characters)
- router: httpd: fix warnings in compiler; clean-up
- router: mdu: mdu.c: clean-up & simplify some if conditions
- router: mdu: remove no more needed functions/files/includes
- router: mdu: fix compiler warnings
- router: rc: blink_5g.c: old blink 5g code is obsolete [RT-AC]
- router: rc: dhcp.c: clean-up
- router: rc: dhcp.c: remove unused variable
- router: rc: wan.c: cleanup WAN LED control [RT-AC]
- router: rc: fix warnings in compiler; clean-up
- router: shared: led.c: clean-up; remove unused code
- router: shared: led.c: extend GPIO pin support from 0-15 to 0-31
- router: shared: misc.c: add support for WAN LED for more MIPS Router according to LED table at file shared/led.c [RT-AC]
- router: shared: misc.c: fix a few typos (wrong type, pointer by mistake) at function wan_led_off(...) and check_wanup(...)
- router: shared: misc.c: change/fix function wan_led(int mode) --> call by value
- router: shared: misc.c: add/fix missing fclose(...) and some cosmetic
- router: shared: shared.h: add missing prototype declaration for function wan_led(...) and wan_led_off(...) [RT-AC]
- router: shared: fix warnings in compiler; clean-up
- router: shared: fix warnings in compiler [RT-AC]
- router: www: vpn-client.asp: change allowed server address length to 60 characters (it's amazing that such long addresses exist ...)
- router: www: basic-ddns.asp: clean-up of vars, remove unneeded js code
- Improved a little bit build progress indicator


2019.1.015-beta 2019.01.10
--------------------------

- kernel: ipv6: Drop packets for loopback address from outside of the box
- kernel: ipv6: drop packets when source address is multicast
- kernel: ipv6: don't accept multicast traffic with scope 0
- kernel: ipv6: don't accept node local multicast traffic from the wire
- kernel: ipv6: drop non loopback packets claiming to originate from ::1
- kernel: ipv6: use ND_REACHABLE_TIME and ND_RETRANS_TIMER instead of magic number
- kernel: ipv6: ip6_forward: perform skb->pkt_type check at the beginning
- kernel: ipv6: drop frames with attached skb->sk in forwarding
- kernel: net: Discard and warn about LRO'd skbs received for forwarding
- kernel: ipv4: ip_forward: perform skb->pkt_type check at the beginning
- kernel: ipv4: ip_forward: Drop frames with attached skb->sk
- kernel: net: ipv4: igmp.c: bonding: fix to rejoin multicast groups immediately
- kernel: net: ipv4: igmp.c: igmp: Reduce Unsolicited report interval to 1s when using IGMPv3
- kernel: net: ipv4: igmp.c: Make igmp group member RFC 3376 compliant
- kernel: ipv6: Remove IPV6_ADDR_RESERVED
- kernel RT-AC: backport useful macros and defines from upstream
- udpxy: update to 1.0.23-12, clean sources
- e2fsprogs: update to 1.44.5
- Makefile: remove n60z (AIO) target, because the image size exceeds the flash size (16MB)
- miniupnpd: do not disable port forwarding when in double NAT / CGNAT
- udpxy: fix start with PPP connection
- udpxy: extend GUI function (advanced-firewall.asp)
- GUI: adblock: update lists immediately, if called from the GUI
- GUI: MultiWAN Routing: increase the maximum number of digits to 80 for Port
- router: httpd: misc.c: use function check_wanup_time(char *prefix) for void asp_link_uptime(int argc, char **argv) to get the link uptime (wanX)
- router: shared: misc.c: make function check_wanup_time() mwan-ready; small change/adjustment to rstats & cstats to use the new function; cosmetic for rstats & cstats at function calc(): add typecast (long) to meet variable wanuptime (long)
- dnsmasq: fix router reboots, when connected to wifi with specific configuration


2018.5          2018.12.21
--------------------------

- kernel: netfilter: ip6_tables: fix information leak to userspace
- kernel: ipv6: Warn users if maximum number of routes is reached
- kernel: inet6: prevent network storms caused by linux IPv6 routers
- kernel: ipv4: correct IGMP behavior on v3 query during v2-compatibility mode
- openssl: update to 1.0.2q
- SQLite: update to 3.26.0
- adminer: update from 4.6.3 to 4.7.0 2018-11-24
- xl2tpd: update to 1.3.13
- php: update to 7.2.13
- nginx: update to 1.14.2
- libcurl: updated CA certificate bundle as of 2018-12-05
- libcurl: update to 7.63.
- rp-pppoe: update to 3.13
- miniupnpd: update to git snapshot from 20181206
- comgt: clean sources of v 0.32, add patches instead
- OpenVPN: add TLS keys generator in GUI for VPN Server as an option for o (Mega-VPN) and z (AIO) targets. Add ability to generate VPN client configuration for TLS
- WIDE-DHCPv6: Fix manpages This patch fixes wide-dhcpv6 manpages (paths, typos, ...)
- WIDE-DHCPv6: Don't strip binaries This patch prevents wide-dhcpv6 build system from stripping built binaries
- WIDE-DHCPv6: Make sla-len config optional
- WIDE-DHCPv6: Make sla-id config optional
- WIDE-DHCPv6: cflag patch
- WIDE-DHCPv6: Fix parallel make race condition
- WIDE-DHCPv6: Adding ifid option to the dhcp6c.conf prefix-interface statement
- IPv6: small fix/changes for DHCPv6 with Prefix Delegation - let IPv6 RA via WAN take care of adding the default route - only add default route ::/0 if option/nvram "ipv6_isp_opt" is enabled via GUI basic-ipv6.asp (Some ISPs/Tomato User maybe need that)
- IPv6: extend GUI status page (status-overview.asp) - show IPv6 addresses for interface wan, br0, br1, br2 and br3
- IPv6: DHCPv6 PD: small corrections - fix visibility for "Request /64 subnet for" --> right now only applicable for DHCPv6 with PD (and not for Native/Static IPv6)
- IPv6: DHCPv6 PD: - override the default EUI-64 address selection and create a very userfriendly address for br0...br3 (--> ends with ::1 now)
- IPv6: small change for DNSMASQ DHCPv6 start address (new ::2 up to ::FFFF:FFFF); leave ::1 address for the router interface brX --> used with DHCPv6-PD (WIDE-DHCPv6) now
- Clean-up of unused matrixssl from the tree, Makefile and other places
- router: Makefile: cosmetics + fix make depend
- router: httpd: tomato.c: fix the correct length of wanX_modem_dev variables
- router: httpd: vpn.c: use system() instead run_program()
- router: mssl: mssl.c: fix start of httpd with HTTPS ON on f and r2f (Mini) targets
- router: rc: firewall.c: allow responses from the dhcpv6 server (Port 547) to the client (Port 546) (--> add Server Port 547)
- router: rom: Makefile: decrease number of tries to 1 for wget. It's already in loop
- router: www: admin-access.asp: change allowed password length to 60 characters
- router: www: vpn-client.asp: change allowed server address length to 40 characters
- router: www: fixes for W3C + some cosmetics
- router: www: qos-classify.asp: change allowed port length to 130 characters
- patches: openssl: split and simplify tomato-mips-specific patch
- switch4g: fix variable initialization in modemReset() function
- switch3g/switch4g: add info to log about successful PIN verification


2018.5.083-beta 2018.11.25
--------------------------

- kernel: BCM47XX: add vectored interrupt support (ie: Linksys WRT160N3, Cisco M10, Asus RT-N12, Linksys EA6500v1, Tenda N80, Tenda W1800R, Buffalo WZR-D1800H, Asus RT-N66U)
- kernel: drivers: net: usb: qmi_wwan.c: fix CVE-2017-16650
- tor: Update to 0.3.4.9
- php: update to 7.2.12
- nano: update to 3.2
- SQLite: pdate to 3.25.3
- dnsmasq: update to 2.80
- uqmi: update to uqmi-01944dd
- libubox: update to libubox-c83a84a, clean sources, add patch instead
- tinc: update to 1.1pre17
- snmpd: update to 5.8
- libcurl: update CA certificate bundle as of 2018-10-17
- libcurl: update to 7.62.0
- dropbear: fix from upstream for CVE-2018-15599
- nginx: update to 1.14.1
- apcupsd: update to 3.14.14
- miniupnpd: update to git snapshot from 20181031 (includes PCP fix)
- mssl: Updated cipher list
- Add IPERF bandwidth test tool with GUI as an option
- GUI: adblock: add warning
- GUI: stubby: add the ability to choose the level of logging
- GUI: add feature to generate VPN static key from GUI
- Add GUI optimization tools that are run before compilation
- GUI: add warning on OpenVPN server page about needed free NVRAM space
- GUI: add option for OpenVPN LZ4-V2 compression
- GUI: Generation of iperf commandline
- GUI: IPerf: fix some minor JS bugs
- www: W3C never-ending-story
- dnsmasq: change default dns priority to 'no-resolv'
- dnsmasq: improve insecure ds syslog to handle servers that really do not support dnssec
- patches: fix mysql re-check patch
- cosmetic and small updates for IPv6
- btools: libfoo.pl: fix typo
- btools: libfoo.pl: prepare for new package (iperf)
- Makefile: add targets n60h, n60k and n60l to build images for Linksys E3000 without minidlna
- Makefile: add stubby to target "o" (Mega-VPN)
- Makefile: remove targets "n60l" (VPN-noMS) and "n60h" (IPv6-VPN) for E3000. Add "n60a" (MiniVPN) instead. Clean-up
- Makefile: changes for "n60" (TendaN60) target: remove minidlna because of the large image size, add dnscrypt-proxy and JFFS instead
- router: preparation of variables for new version of switch4g/switch3g
- router: preparation of variables for new version of switch4g/switch3g part 2
- router: Makefile: fix build when valgrind is installed on host
- router: Makefile: fix nano not working due to missing libstdc++ library (Mega-VPN target)
- router: Makefile: add libnfnetlink-clean target (additionally add PARALLEL_BUILD to MAKE)
- router: Makefile: Filter support for PHP needs to be enabled for h5ai
- router: Makefile: fix typo
- router: www: qos-graphs.asp: Hide "Zoom Graphs" because it doesn't work anyway
- router: www: status-overview.asp: Cosmetics (W3C)
- router: www: tomato.js: small fixes
- router: www: basic-ipv6.asp AND rc: dhcp.c - some cosmetic - add missing verifcation for lanX_ipv6 - add/change comments (also at file httpd/tomato.c) - add additional check before we request a prefix for br1/br2/br3
- router: httpd: increase HTTP_MAX_LISTENERS to 16 --> avoid error message "number of listeners exceeded the max allowed" --> advanced setups with Dual-Stack (IPv4 and IPv6) and remote access need more listerners
- router: httpd: wl.c: fix popen/pclose
- router: httpd: update gencert.sh script
- router: httpd: tomato.c - sync NVRAM variables sequence of OpenVPN Server 1 and Server 2 - add missing default-values for variables "vpn_server1_userpass" and "vpn_server1_nocert"
- router: httpd: iperf.c: change the location of the pid file
- router: dhcp.c: add some comments -cosmetic -change *lanif to const char (pointer can be changed but not char), because of getifaddr return value (const char*) -remove semicolon after some if-conditions
- router: nvram: defaults.c: change default value for ntp_updates (Auto Update Time) to 1 (Auto interval)
- router: rc: vpn.c: add some comments -protection/cosmetic within function start_vpn_eas() and stop_vpn_eas: add check that i (counter for Server X/Client Y) will always be < 4 before write value to nums[i]
- router: rc: network.c - Do not enable IPv6 for 'all', 'eth0', 'eth1', 'eth2' (ethX) - IPv6 will live on the bridged instances
- router: rc: services.c: fix: Static DNS settings broken with WAN disabled (i.e. operating as AP)
- router: usbmodeswitch: remove obsolete files from the device database
- small fix for IPv6 accept_ra: make it possible to change accept_ra value for WAN and LAN(br0...br3) without reboot/restart of the router
- IPv6: restrict Accept RA from LAN option (with dnsmasq)
- stubby: make tls_authentication REQUIRED
- toolchain: update to support IPerf (def. of be64toh and htobe64)
- adblock: clean-up, fixes, improvements
- adblock: decrease timeout for wget to a reasonable value
- adblock: fix race condition when wan is up; avoid adblock to start downloading over and over (on some connections 2-3 times); instead, it's better to have one inactive process
- switch3g: change PIDFILE location
- switch3g: rework (1/2)
- switch4g: change PIDFILE location
- switch4g: add more possible options to Network Type and Roaming for 2nd type (qmi-wwan) non-hilink modems
- switch4g: rework
- switch4g: do not search all DIAGS every time - instead use already found in searchDiag()
- vpnrouting: stay as close as possible to ARM
- mssl: fix ssl context ciphers & options wasn't applied
- nano: bindings: when Ctrl+Shift+Delete has no keycode, don't use KEY_BSP
- nano: fix compilation again when configured with --enable-tiny
- tor: make tor fully functional, so users can solve xxx.onion website dns and visit tor sites
- Final clean-up of UI files according to the Web Consortium W3C standard
- Fix PHP build when libicu is installed
- Fix build when LZMA is installed on host
- Fix "cannot run test program while cross compiling"
- Remove residues in the code after ARIA2
- Cleanup of unused libusb from the tree and Makefile


2018.4          2018.09.10
--------------------------

- kernel: cifs: fix possible memory corruption in CIFSFindNext
- kernel: netfilter: nf_conntrack: fix early_drop with reliable event delivery
- kernel: netfilter: ebtables: fix wrong name length while copying to user-space
- tor: update to 0.3.3.9
- openssl: update to 1.0.2p
- php: update to 7.2.9
- e2fsprogs: update to 1.44.4
- dnsmasq: update to 2.80test6
- libcurl: update to 7.61.1
- Preliminary support for stubby
- Makefile: changes for a (r2a) target: remove minidlna because of the large image size, add dnscrypt-proxy and JFFS instead
- GUI: add a needed include file for code utilizing bwm-common.js
- GUI: display quality as percentage in device list
- GUI: ipt-graphs.asp: do not display graphs if monitoring has been disabled
- GUI: do not display bwm or ipt graphs if monitoring has been disabled
- Fixing the `uname -r` issue in readme
- router: rc: transmission.c: sysctl binary is not included in TomatoUSB, write values directly instead
- router: rc: firewall.c and rc.h: add function "enable_ndp_proxy()" - Enable NDP Proxy for IPv6 builds - add missing conditional compilation
- radvd: remove leftovers at file router/rc/rc.h (Tomato uses dnsmasq)
- OpenVPN: make IPv6 connection possible if IPv6 is enabled
- OpenVPN: extend Server GUI functionality - add option to push LAN(br0)...LAN4(br3) (only if available) - push the suitable DNS Server LAN IP
- Fix curl build failures
- stealthmode: update to 0.11 (also resolves conflict caused by commit # 6857a6d)


2018.3.106-beta 2018.07.22
--------------------------

- miniupnpd: update to 2.1.20180706
- dnsmasq: update to 2.80test2 (Fri, 29 Jun 2018 15:39:41 +0200)
- tor: update to 0.3.3.8
- libjson-c: update to 0.13.1
- dnscrypt-proxy: update resolvers csv to 20180709
- WNR3500Lv2: add JFFS support
- Fix JFFS2 formatting for non RT-AC
- Increase the maximum size that is used when reading the ssh-host-key (to 4096 bits)
- Makefile: clean-up; remove variable CONFIG_LINUX26, which is no longer used since 4 years
- Makefile RT-AC: fix c (r2c) target; for unknown reasons, target c (r2c) was the same as a (r2a)
- Makefile RT-AC: changes for a (r2a) target: remove minidlna because of the large image size, add dnscrypt-proxy and JFFS instead
- Makefile RT-AC: add KERN_SIZE_OPT to f (r2f), i (r2i) and j (r2j) targets to save some space
- Revert "WNR3500Lv2: add JFFS support"; causing issues
- Revert "Fix JFFS2 formatting for non RT-AC"; causing issues


2018.3.082-beta 2018.07.09
--------------------------

- kernel RT/RT-N: update netfilter_bridge headers, to fix compilation of ebtables
- kernel: tweak input class modules, removing mouse/joystick support
- libcurl: update to 7.60.0
- sqlite: update to 3.24.0
- nano: update to 2.9.8
- ebtables: update to master-head as at May 25, 2018
- tor: update to 0.3.3.7
- xl2tpd: update to 1.3.12
- dnsmasq: update to 2.80test2 (Tue, 12 Jun 2018 17:37:40 +0200)
- libcurl: updated CA certificate bundle as of 2018-06-20
- tinc: update to 1.1pre16
- php: update to 7.2.7
- Updated adminer from 4.6.2 to 4.6.3 2018-06-28
- vsftpd: clean 3.0.3 sources, add patch instead; addtionally, change code optimization from -O2 to -Os to save some space
- samba: enable PARALLEL_BUILD directive for components. Change code optimization to -Os to save some space
- GUI: do not list HTTPS options on Admin Access page, if build with NO_HTTPS flag
- GUI: only include curl as a connection checker, if it's built
- GUI: openvpn: add AES-*-GCM ciphers to the available legacy ciphers
- nas-ups: fix of annoying error when APCUPSD Deamon is down on router start
- busybox: enable TEE command
- dnscrypt-proxy: remove unneeded public-resolvers.md file from build
- dnscrypt-proxy: define own timeout and number of tries for wget to use local copy of server list much quicker than with defaults
- openssl: change code optimization from -O3 to -Os to save some space
- pppd: change code optimization from -O2 to -Os to save some space
- nvram: change code optimization from -O2 to -Os to save some space
- et: change code optimization from -O2 to -Os to save some space
- rp-pppoe: change code optimization from -O2 to -Os to save some space
- accel-pptp: change code optimization from -O2 to -Os to save some space
- ipset: change code optimization from -O2 to -Os to save some space
- nettle: change code optimization from -O2 to -Os to save some space
- igmproxy: change code optimization from -O2 to -Os to save some space
- mysql: change code optimization from -O2 to -Os to save some space
- p910nd: change code optimization from -O2 to -Os to save some space
- lzo: change code optimization from -O3 to -Os to save some space
- apcupsd: fix code optimization to -Os to save some space
- portmap: fix code optimization to -Os to save some space
- pptpd: fix code optimization to -Os to save some space
- glib: fix code optimization to -Os to save some space
- nocat: change code optimization from -O2 to -Os to save some space
- nginx: change code optimization to -Os to save some space
- comgt: change code optimization to -Os to save some space
- transmission: add -Os flag also for g++ compiler to save same space
- patches: dnsmasq: log packet resize reports at debug level instead of warning since they are too frequent
- Makefile: Changes for wndr64* and f5d/f7d targets, due to the large image size; wndr64: remove minidlna; wndr64-vpn: remove samba; f5d/f7d: remove minidlna
- Makefile: kernel: optimize for size (gcc -Os) also for K26 builds
- Makefile: use kernel size optimization (gcc -Os) also for f5d, f7d and f9k targets, but remove as default behavour (added by one of merges from master branch)
- Makefile: enable back on minidlna for f5d and f7d targets
- router: httpd: tomato.c: fix typo
- router: Makefile: fix the issue causing the huawei_ether.ko module to be added to the image even when building without USB support - saving 60kB
- router: Makefile: cleanup
- router: Makefile: add PARALLEL_BUILD directive to dhcpv6
- router: Makefile: add PARALLEL_BUILD back to e2fsprogs
- router: Makefile: add size optimization to dnsmasq and compile with NO_DUMPFILE
- router: Makefile: add LOCKFILE/LOCKDIR to ebtables
- router: Makefile: change code optimization for openvpn from -O3 to -Os to save some KBs
- router: Makefile: remove dbclient from dropbear for f, i and j targets (Mini, MiniIPv6, MiniVPN), to save some space
- router: Makefile: compile dnsmasq with NO_ID, NO_AUTH and NO_GMP directive + some cosmetics
- router: rc: clean-up
- router: rc: init.c: fix compiler warnings
- router: rc: wan.c: start miniupnpd after httpd/later to avoid disabling IPv6 at miniupnpd startup (does happen sometimes with 2018-3) --> solves miniupnpd warning ("no HTTP IPv6 address, disabling IPv6") at reboot / restart
- router: www: status-overview.asp: fix wireless show/hide state retension
- router: www: advanced-tor.asp: fix search for specified words in Custom Configuration
- router: www: advanced-tor.asp: allow to enter "SocksPort" also in Custom Configuration
- router: www: basic-network.asp: fix a different URL to the VLAN page for MIPSR1 / MIPSR2
- router: www: clean-up to save some space
- router: httpd/rc: fix warnings in compiler


2018.3.006-beta 2018.06.01
--------------------------

- kernel: usb: qmi_wwan: add support for Netgear Fuse (Aircard 779S)
- kernel: IGMP: resolve potential for divide by 0, allowing remote attackers to cause a denial of service via IGMP packets (CVE-2012-0207)
- nano: update to 2.9.6
- transmission: update to 2.94
- miniupnpd: update to 2.1
- openssl: clean sources 1.0.2k, add patches instead
- openssl: update to 1.0.2o
- minidlna: update to 1.2.1
- e2fsprogs: update to 1.44.2 (fix toolchain to support it)
- nano: update to 2.9.7
- bridge-utils: update to 1.6 (plus commits in master as at May 7, 2018)
- samba: ported Samba 3.6.25 (SMB1 + SMB2 support) from asuswrt-merlin with all patches, deleted old Samba 3.0.37
- ntpd: transition from using ntpclient/ntpc to Busybox ntpd
- snmpd: update to v5.8.rc2
- php: update to 7.2.6
- tor: update to 0.3.3.6
- btools/libfoo.pl: there's no library to optimize in Samba 3.6.x, Makefile build Samba with static libraries
- BWL: Manipulate waniface only if QoS is Disabled
- Delete unnecessary /router/samba folder
- dhcpv6: incorporating and bringing inline against the below... Several fixes (router/dhcpv6/dhcp6c.c)
- dhcpv6: remove from commit 9274c3f fix: "dhcpv6: close file descriptors on exec", because it breaks compilation on mips
- dhcpv6: fixing use of memset. It was noted in this ticket, though no fix upstream. https://sourceforge.net/p/wide-dhcpv6/bugs/35/
- dhcpv6: no need for sizeoff(char) (in router/dhcpv6/dhcp6c.c)
- dhcpv6: fix dhcp6 parallel build failure with poudriere on FreeBSD, by implementing patch from bug 38
- dhcpv6: patch #1 from: https://sourceforge.net/p/wide-dhcpv6/bugs/36/ Resolve bind(control sock): Address already in use error
- dhcpv6: patch #2 from https://sourceforge.net/p/wide-dhcpv6/bugs/36/ Resolves bind(control sock): Address already in use issue
- dhcpv6: fix bad memset in auth.c
- dhcpv6: fix a number of resource/memory leaks
- httpd: fix potential FILE * resource leak
- httpd: allow for NULL termination on variable partname by increasing its size from 16 to 17
- httpd: rework save_variables procedure so that sprintf is not writing to the same variable, in which case the results are considered undefined
- miniupnpd: add real ipv6 support
- ntpd: clean ups in ntp start proc
- router/Makefile: e2fsprogs: fix e2fsprogs build; tune configure options, disable parallel makefile due errors, build only libraries needed by nfs (tomato uses e2fs tools from busybox)
- router/Makefile: openssl: make proper call to openssl Configure script
- router/Makefile: tinc: don't build doc and GUI
- router/Makefile: transmission: don't build cli tools
- router/Makefile: change "autoreconf" to "autoreconf -fsi" for pcre (sync with ARM branch)
- router/Makefile: change "autoreconf -fvi" to "autoreconf -fsi" for libnfsidmap (sync with ARM branch)
- router/Makefile: mdadm: skip building mdadm man pages
- router/Makefile: gmp: optimize gmp build; fix compilation with different autotools version, allow parallel make, don't build demos and doc
- router/Makefile: add "--ipv6" to miniupnpd-config
- router/Makefile: delete unnecessary code, after Samba 3.0.x and Samba 3.5.x
- router/Makefile: openssl: fix build break for "f" and "r2f" targets
- router/shared/defaults.c: disable "nf_sip" by default (GUI @ Tracking / NAT Helpers SIP - Option Off)
- samba: improve performance
- samba: chain code can return uninitialized memory when talloc buffer is grown (CVE-2017-15275)
- samba: Prevent client short SMB1 write from writing server memory to file (CVE-2017-12163)
- samba: only fallback to anonymous if authentication was not requested (CVE-2017-12150)
- www: Modified Bandwidth Limiter warnings
- www: advanced-vlan.asp: update to the newest version (Apr 16 2018)
- www: default theme - original 'usbblue'
- www: tools-wol.asp: WOL bugfix
- www: advanced-firewall.asp: fix typo at IGMP proxy notes section (wrong example value for downstream threshold)
- www: Makefile: cleanup comments more aggressively 


2018.2          2018.05.13
--------------------------
not public

- kernel: ip6_tunnel: get the min mtu properly in ip6_tnl_xmit
- Add Netgear WNDR3400v3 support
- Add/Update Belkin F5D/F7D/F9K support
- igmpproxy: update to 0.2.1
- usb_modeswitch: update to 2.52, and data package to 2017-08-06
- xl2tpd: update to 1.3.11
- tinc: update to 1.1pre15
- miniupnpd: update to 2.0.20180503
- OpenVPN: update to 2.4.6
- nginx: update to 1.13.8 Mainline version (from 1.10.3 Legacy version)
- php: update to 7.2.5
- nettle: update to 3.4
- minidlna: clean sources 1.1.6, add patch instead
- dropbear: update to 2018.76
- dnscrypt-proxy: change update-resolvers script to process v2 resolvers format
- dnscrypt-proxy: update local copy of dnscrypt-resolvers.csv file
- dnscrypt-proxy: added possibility to enable in GUI ephemeral-keys option
- libid3tag: fix build/link error on Ubuntu + some additional fixes
- dnsmasq: cosmetics
- GUI: fix BWM/IPT graphs
- GUI: Wireless Filter: add ability to choose filtering method on every physical and virtual wifi interface separately
- GUI: Virtual Wireless Interfaces: fixed lack of 80MHz bandwith for the 5GHz band in drop down list
- GUI: www: default theme - original 'usbblue'
- GUI: add possibility to change default IP (198.51.100.1) where DNS queries send to trigger connect-on-demand
- GUI: basic-network.asp: LCP Echo (Interval|Link fail limit) is used also with PPTP, L2TP and PPP3G so let's make it possible to modify.
- A collection of patches and fixes to make it to work pppoe, pptp_client, PPTP server, wan, mwan, etc (@tsynik)
- adblock: add NoCoin list to adblock (cryptomining)
- adblock: fix issue with too short field for blacklist url (90 -> 130 chars)
- adblock: fix logic of parsing downloaded blacklist files
- allow IGMPv3 for LAN
- IGMP proxy: add the possiblity for a custom config (instead of the tomato default)
- Static IPv6 configuration changes/improvements
- www/qos-settings.asp: fixed issue #11 - QoS bandwidth calculation is missing since v132
- Improvements to 'sysinfo' script
- WL: wireless survey rework
- httpd/tomato.c: cleanup
- others/switch4g: add B8 (900 MHz) LTE band to choose from
- others/watchdog: increase curl timeout from 3 to 5 seconds in ckcurl function
- rc: usb.c/init.c fixed old typos
- rc/misc.c: FTP data connection fails from WAN side when port is not 21
- rc/redial.c: re-connection problems have been resolved with Keep Alive mode on PPPoE/PPTP/L2TP
- rc/services.c: miniupnpd - changed the coding to use an interface name for the listening_ip= value instead of an IP/netmask to prevent log flood
- rc/services.c: fixes issues with httpd
- rc/services.c: Connect On Demand could no longer work as designed, due to address 1.1.1.1 becoming a legit recursive DNS server, so a different IP address was chosen for this purpose.
- rc/wan.c: fixed shutdown of the 4g/lte modem during router restart
- rc/wan.c: cosmetics + preparation for upcoming changes in switch3g
- rc/wan.c: removed "bump wan state file on connect (don't wait watchdog result)"
- router/wan.c: cleanup (some addtions to chat file; add: ppp_debug also switch on debbuging mode in chat)
- busybox: change uname
- Multiwan: rc/nvram/defaults: add forgotten "wanX_ppp_redialperiod" default values for wans 2-4
- patches: cosmetics in php patch
- Makefile: Fix TOR build on some systems
- Makefile: --with-mysql option is no longer supported in PHP7. You need to use mysqli extension for this.
- router/Makefile: enabled mini-gmp, saves 4KB


2018.1.066-beta 2018-04-27
--------------------------

- kernel: patch kernel against CVE-2016-10229
- kernel: disable router anycast address for /127 and /128 prefixes
- kernel: resolve force_igmp_version ignored when a IGMPv3 query received
- kernel: igmp: add a missing spin_lock_init()
- kernel: igmp: acquire pmc lock for ip_mc_clear_src()
- kernel: proc/sysctl: fix the int overflow for jiffies conversion
- kernel: net: ipv4: fix multipath RTM_GETROUTE behavior when iif is given
- flac: update to 1.3.2
- libxml2: update to 2.9.3
- libpng: update to 1.2.57
- libcurl: update to 7.59.0
- pcre: update to 8.42
- nano: update to 2.9.5
- libsodium: update to 1.0.15
- Tor: update to 0.3.2.10
- OpenVPN: update to 2.4.5
- dnscrypt-proxy: update to 1.9.5
- dnsmasq: update to 2.79
- adminer: update to 4.6.2 2018-02-20 (only English)
- uqmi: updated to uqmi-8ceeab6
- lzo: update to 2.10
- libcurl: update CA certificate bundle as of 2018-03-07
- libexif: update to 0.6.21
- libogg: update to 1.3.3
- libvorbis: update to 1.3.6
- libusb: update to 1.0.22
- pptpd: update to 1.4.0
- rp-pppoe: update to 3.12
- ntfs-3g: update to 2017.3.23
- sqlite: update to 3.23.1
- GUI: OpenVPN: add LZ4, NCP and auth digest support
- GUI: IP Traffic and Bandwith monitors: add possibility to change unit of displayed speeds (kbit/KB and Mbit/MB)
- GUI: QoS/BW Limiter: increase the maximum number of digits in speed fields to 8
- GUI: add possibility to select LTE band and roaming on 4G/LTE connection
- libcurl: size optimization (disable proxy and libcurl output options)
- OpenVPN: change configuration option 'tls-remote' to 'remote-cert-tls', because 'tls-remote' is deprecated or even removed in newest openvpn version
- OpenVPN client: fixed issue #136: added 'route-noexec' to client configuration to prevent DNS leaks
- OpenVPN: change default client's remote/local IPs, so each is different
- OpenVPN: change default remote/local IPs/subnet for servers, so each is different
- switch3g/4g, watchdog: fix modem recognition, logic of watchdog
- switch4g: improved/fixed QMI modem support
- busybox: drop modules.dep path hack, it doesn't required
- busybox: add hostname applet, required by some Entware packages
- minidlna: add persistent uuid based on router's mac
- Miniupnpd: [PATCH] Tomato Specific: Enable Miniupnpd portinuse check
- Makefile: disable RAID (mdadm binary) on AIO (z) and Mega-VPN (o) targets
- router/Makefile: remove dependencies from various install recipes, to reduce the amount of double (and triple) recompile duing build
- flac: fix compilation on Mint x64
- nfs-utils: PATCH exportfs: getexportent interprets -test-client- as default options
- rc/ppp.c: typo
- rc/pptp_client.c: add pptp-client user/pass quotation (fix issue #148)
- rc/services.c: [PATCH] REVERT: Do not write out 'no-dhcp-interface' in dnsmasq.conf
- rc/services.c: SIGINT seems to be issued too soon against dnsmasq - wait one second before doing so
- rc/services.c: correct val for unlink 
- rc/services.c: avoid concurrent connections
- rc/tor.c: removed deprecated option from config (AllowUnverifiedNodes)
- rc/tor.c: add localhost ports and .onion support; disable IPv6 names resolution for onion domains by default;
  enable LAN pool for clients; add AvoidDiskWrites option to config
- rc/wan.c: fix typos, redial period for pppd
- rc/wan.c: move l2tp route fix to preset_wan
- rc/wan.c: don't terminate xl2tpd on every ppp start
- rc/wan.c: dnsmasq process was receiving a second SIGINT signal. Instead of triggering another DNSSEC time checking, it was killing process
- rc/wan.c: start adblock only when wan is up
- rc/wan.c: fix boot with only secondary/etc wan active (assume current wan is primary if previous is not up)
- rc/wan.c: adblock improvments, just start once
- rc/wan.c: cleanup
- rc/watchdog.c: changed one of connection checkers from wget to curl; now this is a recommended method for LTE connections
- fix "Enable DSCP Fix", and make it MultiWan aware *
- fix ntpc for mwan
- ipv4: Resolve force_igmp_version ignored when a IGMPv3 query received
- upnp: external and internal port arguments are swapped in miniupnpd's config file
- Code cleanup/improvements
- Make igmpproxy MWAN-friendly (It flooded logs when only secondary wan was connected)
- Improve vpnrouting and switch3g script logic, other small changes
- tinc: Add daemon poll option to check if the daemon is running, Similar to OpenVPN
- Revert: GUI: fix problem with passing Tagged/UNtagged on same port when using default vlan (Not working as intended/has problems)


2018.1.010-beta 2018-04-15
--------------------------
not public

- dnsmasq: update to 2.78
- nano: update to 2.8.1
- ncurses: update to 6.1
- transmission: update to 2.93
- php: update to 5.6.33
- GUI: fix issue with too short field for DNS 1/DNS 2
- GUI: fix problem with passing Tagged/UNtagged on same port when using default vlan
- E2500/3200: change nvram size to 32kB, to prevent the 5GHz radio from disappearing
- sqlite: update to 3.23.1
