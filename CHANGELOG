FreshTomato-MIPS Changelog
===========================



2018.2          2018.05.13
--------------------------
not public

- kernel: ip6_tunnel: get the min mtu properly in ip6_tnl_xmit
- Add Netgear WNDR3400v3 support
- Add/Update Belkin F5D/F7D/F9K support
- igmpproxy: update to 0.2.1
- usb_modeswitch: update to 2.52, and data package to 2017-08-06
- xl2tpd: update to 1.3.11
- tinc: update to 1.1pre15
- miniupnpd: update to 2.0.20180503
- OpenVPN: update to 2.4.6
- nginx: update to 1.13.8 Mainline version (from 1.10.3 Legacy version)
- php: update to 7.2.5
- nettle: update to 3.4
- minidlna: clean sources 1.1.6, add patch instead
- dropbear: update to 2018.76
- dnscrypt-proxy: change update-resolvers script to process v2 resolvers format
- dnscrypt-proxy: update local copy of dnscrypt-resolvers.csv file
- dnscrypt-proxy: added possibility to enable in GUI ephemeral-keys option
- libid3tag: fix build/link error on Ubuntu + some additional fixes
- dnsmasq: cosmetics
- GUI: fix BWM/IPT graphs
- GUI: Wireless Filter: add ability to choose filtering method on every physical and virtual wifi interface separately
- GUI: Virtual Wireless Interfaces: fixed lack of 80MHz bandwith for the 5GHz band in drop down list
- GUI: www: default theme - original 'usbblue'
- GUI: add possibility to change default IP (198.51.100.1) where DNS queries send to trigger connect-on-demand
- GUI: basic-network.asp: LCP Echo (Interval|Link fail limit) is used also with PPTP, L2TP and PPP3G so let's make it possible to modify.
- A collection of patches and fixes to make it to work pppoe, pptp_client, PPTP server, wan, mwan, etc (@tsynik)
- adblock: add NoCoin list to adblock (cryptomining)
- adblock: fix issue with too short field for blacklist url (90 -> 130 chars)
- adblock: fix logic of parsing downloaded blacklist files
- allow IGMPv3 for LAN
- IGMP proxy: add the possiblity for a custom config (instead of the tomato default)
- Static IPv6 configuration changes/improvements
- www/qos-settings.asp: fixed issue #11 - QoS bandwidth calculation is missing since v132
- Improvements to 'sysinfo' script
- WL: wireless survey rework
- httpd/tomato.c: cleanup
- others/switch4g: add B8 (900 MHz) LTE band to choose from
- others/watchdog: increase curl timeout from 3 to 5 seconds in ckcurl function
- rc: usb.c/init.c fixed old typos
- rc/misc.c: FTP data connection fails from WAN side when port is not 21
- rc/redial.c: re-connection problems have been resolved with Keep Alive mode on PPPoE/PPTP/L2TP
- rc/services.c: miniupnpd - changed the coding to use an interface name for the listening_ip= value instead of an IP/netmask to prevent log flood
- rc/services.c: fixes issues with httpd
- rc/services.c: Connect On Demand could no longer work as designed, due to address 1.1.1.1 becoming a legit recursive DNS server, so a different IP address was chosen for this purpose.
- rc/wan.c: fixed shutdown of the 4g/lte modem during router restart
- rc/wan.c: cosmetics + preparation for upcoming changes in switch3g
- rc/wan.c: removed "bump wan state file on connect (don't wait watchdog result)"
- router/wan.c: cleanup (some addtions to chat file; add: ppp_debug also switch on debbuging mode in chat)
- busybox: change uname
- Multiwan: rc/nvram/defaults: add forgotten "wanX_ppp_redialperiod" default values for wans 2-4
- patches: cosmetics in php patch
- Makefile: Fix TOR build on some systems
- Makefile: --with-mysql option is no longer supported in PHP7. You need to use mysqli extension for this.
- router/Makefile: enabled mini-gmp, saves 4KB


2018.1.066-beta 2018-04-27
--------------------------

- kernel: patch kernel against CVE-2016-10229
- kernel: disable router anycast address for /127 and /128 prefixes
- kernel: resolve force_igmp_version ignored when a IGMPv3 query received
- kernel: igmp: add a missing spin_lock_init()
- kernel: igmp: acquire pmc lock for ip_mc_clear_src()
- kernel: proc/sysctl: fix the int overflow for jiffies conversion
- kernel: net: ipv4: fix multipath RTM_GETROUTE behavior when iif is given
- flac: update to 1.3.2
- libxml2: update to 2.9.3
- libpng: update to 1.2.57
- libcurl: update to 7.59.0
- pcre: update to 8.42
- nano: update to 2.9.5
- libsodium: update to 1.0.15
- Tor: update to 0.3.2.10
- OpenVPN: update to 2.4.5
- dnscrypt-proxy: update to 1.9.5
- dnsmasq: update to 2.79
- adminer: update to 4.6.2 2018-02-20 (only English)
- uqmi: updated to uqmi-8ceeab6
- lzo: update to 2.10
- libcurl: update CA certificate bundle as of 2018-03-07
- libexif: update to 0.6.21
- libogg: update to 1.3.3
- libvorbis: update to 1.3.6
- libusb: update to 1.0.22
- pptpd: update to 1.4.0
- rp-pppoe: update to 3.12
- ntfs-3g: update to 2017.3.23
- sqlite: update to 3.23.1
- GUI: OpenVPN: add LZ4, NCP and auth digest support
- GUI: IP Traffic and Bandwith monitors: add possibility to change unit of displayed speeds (kbit/KB and Mbit/MB)
- GUI: QoS/BW Limiter: increase the maximum number of digits in speed fields to 8
- GUI: add possibility to select LTE band and roaming on 4G/LTE connection
- libcurl: size optimization (disable proxy and libcurl output options)
- OpenVPN: change configuration option 'tls-remote' to 'remote-cert-tls', because 'tls-remote' is deprecated or even removed in newest openvpn version
- OpenVPN client: fixed issue #136: added 'route-noexec' to client configuration to prevent DNS leaks
- OpenVPN: change default client's remote/local IPs, so each is different
- OpenVPN: change default remote/local IPs/subnet for servers, so each is different
- switch3g/4g, watchdog: fix modem recognition, logic of watchdog
- switch4g: improved/fixed QMI modem support
- busybox: drop modules.dep path hack, it doesn't required
- busybox: add hostname applet, required by some Entware packages
- minidlna: add persistent uuid based on router's mac
- Miniupnpd: [PATCH] Tomato Specific: Enable Miniupnpd portinuse check
- Makefile: disable RAID (mdadm binary) on AIO (z) and Mega-VPN (o) targets
- router/Makefile: remove dependencies from various install recipes, to reduce the amount of double (and triple) recompile duing build
- flac: fix compilation on Mint x64
- nfs-utils: PATCH exportfs: getexportent interprets -test-client- as default options
- rc/ppp.c: typo
- rc/pptp_client.c: add pptp-client user/pass quotation (fix issue #148)
- rc/services.c: [PATCH] REVERT: Do not write out 'no-dhcp-interface' in dnsmasq.conf
- rc/services.c: SIGINT seems to be issued too soon against dnsmasq - wait one second before doing so
- rc/services.c: correct val for unlink 
- rc/services.c: avoid concurrent connections
- rc/tor.c: removed deprecated option from config (AllowUnverifiedNodes)
- rc/tor.c: add localhost ports and .onion support; disable IPv6 names resolution for onion domains by default;
  enable LAN pool for clients; add AvoidDiskWrites option to config
- rc/wan.c: fix typos, redial period for pppd
- rc/wan.c: move l2tp route fix to preset_wan
- rc/wan.c: don't terminate xl2tpd on every ppp start
- rc/wan.c: dnsmasq process was receiving a second SIGINT signal. Instead of triggering another DNSSEC time checking, it was killing process
- rc/wan.c: start adblock only when wan is up
- rc/wan.c: fix boot with only secondary/etc wan active (assume current wan is primary if previous is not up)
- rc/wan.c: adblock improvments, just start once
- rc/wan.c: cleanup
- rc/watchdog.c: changed one of connection checkers from wget to curl; now this is a recommended method for LTE connections
- fix "Enable DSCP Fix", and make it MultiWan aware *
- fix ntpc for mwan
- ipv4: Resolve force_igmp_version ignored when a IGMPv3 query received
- upnp: external and internal port arguments are swapped in miniupnpd's config file
- Code cleanup/improvements
- Make igmpproxy MWAN-friendly (It flooded logs when only secondary wan was connected)
- Improve vpnrouting and switch3g script logic, other small changes
- tinc: Add daemon poll option to check if the daemon is running, Similar to OpenVPN
- Revert: GUI: fix problem with passing Tagged/UNtagged on same port when using default vlan (Not working as intended/has problems)


2018.1.010-beta 2018-04-15
--------------------------
not public

- dnsmasq: update to 2.78
- nano: update to 2.8.1
- ncurses: update to 6.1
- transmission: update to 2.93
- php: update to 5.6.33
- GUI: fix issue with too short field for DNS 1/DNS 2
- GUI: fix problem with passing Tagged/UNtagged on same port when using default vlan
- E2500/3200: change nvram size to 32kB, to prevent the 5GHz radio from disappearing
- sqlite: update to 3.23.1
